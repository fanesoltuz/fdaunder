<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>FDA Underwear - CoÈ™ de CumpÄƒrÄƒturi</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bangers&display=swap');

    body {
      font-family: 'Bangers', cursive;
      margin: 0;
      padding: 0;
      background: url("graffiti.jpg") center center / cover no-repeat fixed; 
      color: #fff; 
    }

    /* ====== HEADER ====== */
    header {
      background-color: #1e1e1e;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.7);
      padding: 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
      text-align: center;
    }
    .header-top {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      margin-bottom: 10px;
    }
    .gorilla-logo {
      width: 70px;
      height: auto;
      margin-top: 5px;
      cursor: pointer;
    }
    .header-top h1 {
      margin: 0;
      font-size: 2em;
      text-align: center;
      color: #fff;
    }
    .cart-icon {
      background: #f04e31;
      color: #fff;
      padding: 10px 15px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s;
      text-align: center;
    }
    .cart-icon:hover {
      background: #c63a24;
    }

    nav ul {
      list-style: none;
      padding: 0;
      display: inline-flex;
      justify-content: center;
      gap: 20px;
      margin: 10px 0 0 0;
    }
    nav ul li a {
      text-decoration: none;
      color: #fff;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav ul li a:hover {
      color: #f04e31;
    }

    /* ====== CART CONTAINER ====== */
    .cart-container {
      max-width: 800px;
      margin: 30px auto;
      background: #1e1e1e;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      color: #fff;
    }
    .cart-container h2 {
      margin-bottom: 20px;
      font-size: 1.8em;
      color: #fff;
    }

    /* Cart items */
    .cart-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      border-bottom: 1px solid #333;
      padding: 15px 0;
      margin-bottom: 15px;
    }
    .cart-item img {
      width: 80px;
      height: 80px;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    .cart-item span {
      display: block;
      font-size: 1.2em;
      color: #fff;
      margin: 5px 0;
    }

    /* Container pentru butoane +/- È™i cantitatea */
    .quantity-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 5px 0;
    }
    .quantity-container button {
      background: #f04e31;
      color: #fff;
      border: none;
      padding: 5px 8px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1em;
    }
    .quantity-container button:hover {
      background: #c63a24;
    }
    .quantity {
      font-size: 1.2em;
      min-width: 20px;
      text-align: center;
    }

    /* Buton È™terge item */
    .cart-item button.remove-btn {
      background: #f04e31;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      margin-top: 10px;
    }
    .cart-item button.remove-btn:hover {
      background: #c63a24;
    }

    .empty-cart {
      text-align: center;
      color: #ccc;
      font-style: italic;
      margin-top: 20px;
    }

    /* Buton Clear All */
    .clear-all-btn {
      margin-top: 20px;
      background: #f04e31;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1.2em;
      border-radius: 5px;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
    }
    .clear-all-btn:hover {
      transform: scale(1.1);
      background-color: red;
    }

    /* ====== CHECKOUT FORM ====== */
    .checkout-form {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      background: #1e1e1e;
      border-radius: 10px;
      color: #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      text-align: center;
    }
    .checkout-form h2 {
      font-size: 1.8em;
      margin-bottom: 20px;
      color: #fff;
    }
    .checkout-form input {
      display: block;
      width: 70%;
      max-width: 400px;
      margin: 0 auto 15px;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #444;
      background: #333;
      color: #fff;
      font-size: 1em;
    }
    .checkout-form input::placeholder {
      color: #ccc;
    }
    .checkout-form button {
      background: #28a745;
      color: #fff;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1.1em;
    }
    .checkout-form button:hover {
      background: #218838;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-top">
      <a href="index.html" class="logo-link">
        <img src="gorila.png" alt="Gorilla Logo" class="gorilla-logo">
      </a>
      <h1>FDA Underwear - CoÈ™ de CumpÄƒrÄƒturi</h1>
      <a class="cart-icon" href="cart.html">
        ðŸ›’ CoÈ™
      </a>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>

  <div class="cart-container">
    <h2>Produse Ã®n CoÈ™</h2>
    <div id="cart-items"></div>
    <button class="clear-all-btn" onclick="clearCart()">Clear All</button>
  </div>

  <div class="checkout-form">
    <h2>Detalii Client</h2>
    <input type="text" id="firstName" placeholder="Nume" required>
    <input type="text" id="lastName" placeholder="Prenume" required>
    <input type="tel" id="phone" placeholder="NumÄƒr de telefon" required>
    <input type="email" id="email" placeholder="Email" required>
    <button onclick="submitOrder()">Trimite Comanda</button>
  </div>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3.11.0/dist/email.min.js"></script>  <script>
    emailjs.init("2A1MNNWe5jsS7hlgF"); // InlocuieÈ™te cu user_id de la EmailJS

    function loadCartItems() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const cartItemsContainer = document.getElementById("cart-items");

      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p class="empty-cart">CoÈ™ul este gol.</p>';
        return;
      }

      cartItemsContainer.innerHTML = '';
      cart.forEach((product, index) => {
        // ProtecÈ›ie minimÄƒ sÄƒ nu aparÄƒ "undefined" sau "null"
        let prodName = product.name || "Produs fÄƒrÄƒ nume";
        let prodPrice = product.price || "0 RON";
        let prodImage = product.image || "https://via.placeholder.com/80";
        let prodQuantity = product.quantity || 1;

        const itemDiv = document.createElement('div');
        itemDiv.classList.add('cart-item');
        itemDiv.innerHTML = `
          <img src="${prodImage}" alt="${prodName}">
          <span>${prodName}</span>
          <span>${prodPrice}</span>
          <div class="quantity-container">
            <button onclick="updateQuantity(${index}, -1)">-</button>
            <span class="quantity">${prodQuantity}</span>
            <button onclick="updateQuantity(${index}, 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeFromCart(${index})">È˜terge</button>
        `;
        cartItemsContainer.appendChild(itemDiv);
      });
    }

    // CreÈ™tem/scÄƒdem cantitatea unui produs
    function updateQuantity(index, delta) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart[index].quantity = (cart[index].quantity || 1) + delta;
      if (cart[index].quantity < 1) {
        cart[index].quantity = 1;
      }
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCartItems();
    }

    function removeFromCart(index) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCartItems();
    }

    function clearCart() {
      localStorage.removeItem("cart");
      loadCartItems();
    }

    function submitOrder() {
      const firstName = document.getElementById("firstName").value;
      const lastName = document.getElementById("lastName").value;
      const phone = document.getElementById("phone").value;
      const email = document.getElementById("email").value;

      let templateParams = {
        name: firstName + ' ' + lastName,
        phone: phone,
        email: email,
        order: JSON.stringify(JSON.parse(localStorage.getItem("cart")))
      };

      emailjs.send('service_ab57nkd', 'template_m0prruj', templateParams)
        .then(() => alert("Comanda a fost trimisÄƒ!"))
        .catch(() => alert("A apÄƒrut o eroare."));
    }

    window.onload = function() {
      loadCartItems();
    }
  </script>
</body>
</html>
